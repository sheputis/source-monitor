# frozen_string_literal: true

# Load all Rakefiles in the project
Dir.glob('spec/**/rake').each { |r| load r }

TEST_GERRIT_USR = 'admin'
TEST_GERRIT_PSW = 'secret'
BASE_URL        = 'http://localhost:8080'

desc 'Starts the local gerrit server'
task :start_gerrit_server do
  sh 'docker run -ti -p 8080:8080 -p 29418:29418 gerritcodereview/gerrit:3.3.0 -d'
end

desc 'Prepares git data for end-to-end tests and uploads them to the local server'
task :prepare_gerrit_data do
  Rake::Task['rest:create'].invoke
  Rake::Task['gerrit_changes_api:create'].invoke
end
